import{j as e,X as v}from"./x.ruB7mzul.js";import{r as o}from"./index.WFquGv8Z.js";import{s as l}from"./supabase.DaSDeVGQ.js";import{I as N}from"./ImageUpload.CqBazWyq.js";import{P as w,S as y,a as k}from"./save.BxNAuNl1.js";import{T as q}from"./trash-2.DZI-MssB.js";function z(){const[u,m]=o.useState([]),[h,x]=o.useState(!0),[i,c]=o.useState(null),[s,a]=o.useState({}),[b,n]=o.useState(!1);o.useEffect(()=>{d()},[]);const d=async()=>{x(!0);const{data:t}=await l.from("players").select("*").order("number",{ascending:!0});t&&m(t),x(!1)},f=t=>{a(t),c(t.id),n(!0)},p=async t=>{if(!confirm("¿Seguro que querés borrar a este jugador?"))return;const{error:r}=await l.from("players").delete().eq("id",t);r||d()},g=async t=>{t.preventDefault();try{if(i){const{error:r}=await l.from("players").update(s).eq("id",i);if(r)throw r}else{const{error:r}=await l.from("players").insert([s]);if(r)throw r}n(!1),c(null),a({}),d()}catch(r){alert("Error guardando jugador"),console.error(r)}},j=()=>{a({}),c(null),n(!0)};return h?e.jsx("div",{className:"text-white font-mono p-12 text-center",children:"Cargando Plantel..."}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"font-heading text-3xl text-white uppercase",children:"Gestión de Plantel"}),e.jsxs("button",{onClick:j,className:"bg-[var(--color-neon-cyan)] text-black font-bold uppercase text-xs px-4 py-2 hover:bg-white transition-colors flex items-center gap-2",children:[e.jsx(w,{size:16})," Nuevo Jugador"]})]}),b&&e.jsxs("div",{className:"bg-[#111] border border-white/20 p-6 rounded-sm mb-8 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-heading text-xl uppercase",children:i?"Editar Jugador":"Nuevo Jugador"}),e.jsx("button",{onClick:()=>n(!1),className:"text-neutral-500 hover:text-white",children:e.jsx(v,{})})]}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-neutral-400 uppercase mb-2",children:"Nombre"}),e.jsx("input",{className:"w-full bg-black border border-white/20 text-white px-4 py-2 focus:border-[var(--color-neon-cyan)]",value:s.name||"",onChange:t=>a({...s,name:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-neutral-400 uppercase mb-2",children:"Posición"}),e.jsx("input",{className:"w-full bg-black border border-white/20 text-white px-4 py-2 focus:border-[var(--color-neon-cyan)]",value:s.role||"",onChange:t=>a({...s,role:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-neutral-400 uppercase mb-2",children:"Número"}),e.jsx("input",{className:"w-full bg-black border border-white/20 text-white px-4 py-2 focus:border-[var(--color-neon-cyan)]",value:s.number||"",onChange:t=>a({...s,number:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-neutral-400 uppercase mb-2",children:"Frase"}),e.jsx("input",{className:"w-full bg-black border border-white/20 text-white px-4 py-2 focus:border-[var(--color-neon-cyan)]",value:s.quote||"",onChange:t=>a({...s,quote:t.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono text-neutral-400 uppercase mb-2",children:"Foto"}),e.jsx("div",{className:"max-w-xs",children:e.jsx(N,{folder:"players",currentImage:s.image,onUpload:t=>a({...s,image:t})})})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{type:"submit",className:"bg-white text-black font-bold uppercase text-xs px-6 py-3 hover:bg-[var(--color-neon-cyan)] transition-colors flex items-center gap-2",children:[e.jsx(y,{size:16})," Guardar Jugador"]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(t=>e.jsxs("div",{className:"bg-[#111] border border-white/10 p-4 flex gap-4 group hover:border-white/30 transition-colors",children:[e.jsx("div",{className:"w-16 h-16 bg-neutral-800 shrink-0 overflow-hidden",children:t.image?e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-neutral-600 font-bold",children:"?"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"text-white font-bold uppercase truncate",children:t.name}),e.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>f(t),className:"text-cyan-400 hover:text-cyan-300",children:e.jsx(k,{size:14})}),e.jsx("button",{onClick:()=>p(t.id),className:"text-red-500 hover:text-red-400",children:e.jsx(q,{size:14})})]})]}),e.jsxs("p",{className:"text-[var(--color-neon-cyan)] font-mono text-xs",children:[t.role," #",t.number]}),e.jsxs("p",{className:"text-neutral-500 text-[10px] mt-1 truncate",children:['"',t.quote,'"']})]})]},t.id))})]})}export{z as default};
