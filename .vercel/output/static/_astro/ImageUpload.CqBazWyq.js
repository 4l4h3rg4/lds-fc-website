import{c as x,j as e,X as N}from"./x.ruB7mzul.js";import{r as a}from"./index.WFquGv8Z.js";import{s as f}from"./supabase.DaSDeVGQ.js";/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],k=x("loader-circle",y);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],I=x("upload",E);function M({onUpload:r,currentImage:h,folder:g="uploads"}){const[o,l]=a.useState(!1),[i,n]=a.useState(h||null),[c,d]=a.useState(null),b=async t=>{try{if(l(!0),d(null),!t.target.files||t.target.files.length===0)throw new Error("You must select an image to upload.");const s=t.target.files[0],w=s.name.split(".").pop(),v=`${Math.random()}.${w}`,u=`${g}/${v}`,{error:m}=await f.storage.from("images").upload(u,s);if(m)throw m;const{data:p}=f.storage.from("images").getPublicUrl(u);n(p.publicUrl),r(p.publicUrl)}catch(s){d(s.message)}finally{l(!1)}},j=()=>{n(null),r("")};return e.jsxs("div",{className:"w-full",children:[i?e.jsxs("div",{className:"relative group w-full h-48 bg-[#111] border border-white/20 rounded-sm overflow-hidden flex items-center justify-center",children:[e.jsx("img",{src:i,alt:"Uploaded preview",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:t=>{t.preventDefault(),j()},className:"absolute top-2 right-2 bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(N,{size:16})})]}):e.jsxs("div",{className:"relative border-2 border-dashed border-white/20 bg-[#111] hover:bg-[#1a1a1a] transition-colors rounded-sm h-48 flex flex-col items-center justify-center p-6 cursor-pointer",children:[e.jsx("input",{type:"file",id:"single",accept:"image/*",onChange:b,disabled:o,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed"}),o?e.jsxs("div",{className:"flex flex-col items-center text-neutral-400",children:[e.jsx(k,{className:"animate-spin mb-2 w-8 h-8 text-[var(--color-neon-cyan)]"}),e.jsx("span",{className:"text-xs font-mono uppercase tracking-widest",children:"Subiendo..."})]}):e.jsxs("div",{className:"flex flex-col items-center text-neutral-400",children:[e.jsx(I,{className:"mb-2 w-8 h-8"}),e.jsx("span",{className:"text-xs font-mono uppercase tracking-widest text-center",children:"Click o Arrastrar Imagen"})]})]}),c&&e.jsx("p",{className:"text-red-500 text-xs mt-2 font-mono",children:c})]})}export{M as I};
