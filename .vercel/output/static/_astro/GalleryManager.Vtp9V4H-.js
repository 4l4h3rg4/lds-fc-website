import{j as e}from"./x.ruB7mzul.js";import{r as s}from"./index.WFquGv8Z.js";import{s as o}from"./supabase.DaSDeVGQ.js";import{I as g}from"./ImageUpload.CqBazWyq.js";import{T as u}from"./trash-2.DZI-MssB.js";function j(){const[l,n]=s.useState([]),[c,i]=s.useState(!0);s.useEffect(()=>{t()},[]);const t=async()=>{i(!0);const{data:a}=await o.from("training_gallery").select("*").order("created_at",{ascending:!1});a&&n(a),i(!1)},d=async a=>{if(a)try{const{error:r}=await o.from("training_gallery").insert([{image_url:a}]);if(r)throw r;t()}catch(r){alert("Error guardando imagen en galería"),console.error(r)}},m=async a=>{if(!confirm("¿Seguro que querés borrar esta foto?"))return;const{error:r}=await o.from("training_gallery").delete().eq("id",a);r||t()};return c?e.jsx("div",{className:"text-white font-mono p-12 text-center",children:"Cargando Galería..."}):e.jsxs("div",{className:"space-y-8",children:[e.jsx("h2",{className:"font-heading text-3xl text-white uppercase",children:"Gestión de Galería (El Taller)"}),e.jsxs("div",{className:"bg-[#111] border border-white/20 p-6 rounded-sm",children:[e.jsx("h3",{className:"text-white font-mono uppercase text-sm mb-4",children:"Subir Nueva Foto"}),e.jsx("div",{className:"max-w-md",children:e.jsx(g,{folder:"gallery",onUpload:d})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:l.map(a=>e.jsxs("div",{className:"group relative aspect-square bg-neutral-900 border border-white/10",children:[e.jsx("img",{src:a.image_url,alt:"Gallery",className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity"}),e.jsx("button",{onClick:()=>m(a.id),className:"absolute top-2 right-2 bg-red-600 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-all hover:scale-110",children:e.jsx(u,{size:16})})]},a.id))}),l.length===0&&e.jsx("p",{className:"text-neutral-500 font-mono text-xs",children:"No hay imágenes en la galería."})]})}export{j as default};
