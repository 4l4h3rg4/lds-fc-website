---
import Layout from "../layouts/Layout.astro";
import StickerCard from "../components/StickerCard.astro";

// Mock Data
interface Player {
    name: string;
    role: string;
    number: string;
    quote: string;
    image?: string;
}

const players: Player[] = [
    {
        name: "El Tanque",
        role: "Defensa",
        number: "04",
        quote: "No pasa nadie.",
    },
    {
        name: "La Pulga",
        role: "Mediocampo",
        number: "10",
        quote: "El balón al piso.",
    },
    {
        name: "Muro",
        role: "Arquero",
        number: "01",
        quote: "Mi arco es sagrado.",
    },
    {
        name: "Rayo",
        role: "Delantero",
        number: "07",
        quote: "Correr hasta morir.",
    },
    { name: "Capi", role: "Capitán", number: "05", quote: "Cabeza fría." },
    {
        name: "Zurdo",
        role: "Lateral",
        number: "03",
        quote: "Por la banda se gana.",
    },
];
---

<Layout title="LDS FC | El Plantel">
    <main class="max-w-7xl mx-auto px-6 pt-32 pb-20">
        <div
            class="flex flex-col md:flex-row justify-between items-end mb-16 gap-6"
        >
            <div>
                <span
                    class="font-mono text-sm text-[var(--color-neon-cyan)] tracking-widest"
                    >Plantel</span
                >
                <h1
                    class="font-graffiti text-6xl md:text-8xl text-white uppercase mt-2"
                >
                    La Familia
                </h1>
            </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
            {
                players.map((p) => (
                    <div class="player-card group relative h-[500px] w-full cursor-pointer perspective-1000">
                        <div class="card-inner relative w-full h-full transition-all duration-700 preserve-3d">
                            <!-- Front Content -->
                            <div class="absolute inset-0 w-full h-full backface-hidden bg-neutral-900 border border-white/10 overflow-hidden">
                                <div class="h-full w-full grayscale group-hover:grayscale-0 transition-all duration-500">
                                    <img
                                        src={p.image || "/logo LDS FC.png"}
                                        alt={p.name}
                                        class="h-full w-full object-cover"
                                    />
                                </div>
                                <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black via-black/80 to-transparent p-6 pt-24">
                                    <span class="text-[var(--color-neon-cyan)] font-mono text-xs tracking-widest uppercase mb-1 block">
                                        {p.number}
                                    </span>
                                    <h2 class="font-heading text-3xl text-white uppercase italic leading-none">
                                        {p.name}
                                    </h2>
                                    <span class="text-white/60 text-sm font-light mt-1 block">
                                        {p.role}
                                    </span>
                                </div>
                            </div>
    
                            <!-- Back Content (Revealed on Flip) -->
                            <div class="absolute inset-0 w-full h-full backface-hidden rotate-y-180 bg-[var(--color-neon-cyan)] p-8 flex flex-col justify-center items-center text-center border-2 border-black">
                                <h3 class="font-heading text-4xl text-black uppercase mb-6 drop-shadow-sm">{p.name}</h3>
                                
                                <div class="space-y-4 font-heading uppercase tracking-wider text-black w-full">
                                    <div class="bg-black/10 py-2 px-4 -rotate-1 rounded-sm">
                                        <span class="block text-xs font-bold opacity-60">Posición</span>
                                        <span class="text-xl font-bold">{p.role}</span>
                                    </div>
                                    
                                    <div class="bg-black/10 py-2 px-4 rotate-1 rounded-sm">
                                        <span class="block text-xs font-bold opacity-60">Goles</span>
                                        <span class="text-xl font-bold">12</span>
                                    </div>
    
                                    <div class="mt-8 pt-6 border-t border-black/20">
                                        <p class="font-graffiti text-xl leading-tight transform -rotate-2">
                                            "{p.quote}"
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                ))
            }
            <!-- Postulate Card -->
            <div class="flex flex-col items-center justify-center p-8 border-2 border-dashed border-white/10 rounded-sm opacity-50 hover:opacity-100 transition-opacity cursor-pointer group h-[500px]">
                <span class="text-4xl mb-4 group-hover:scale-110 transition-transform">➕</span>
                <span class="font-heading text-xl uppercase text-center text-white">¿Quieres ser uno?</span>
                <span class="text-xs font-mono mt-2 text-[var(--color-neon-cyan)]">POSTÚLATE</span>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('astro:page-load', () => {
             setupCards();
        });
        
        // Setup initial load too just in case
        setupCards();

        function setupCards() {
            const cards = document.querySelectorAll('.player-card');
            cards.forEach((card) => {
                card.addEventListener('click', () => {
                    const inner = card.querySelector('.card-inner');
                    if (inner) inner.classList.toggle('rotate-y-180');
                });
            });
        }
    </script>

    <style>
        .perspective-1000 { perspective: 1000px; }
        .preserve-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .card-inner { position: relative; width: 100%; height: 100%; transform-style: preserve-3d; transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
    </style>
</Layout>
