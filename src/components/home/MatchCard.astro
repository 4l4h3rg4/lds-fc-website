---
import { Calendar, MapPin } from "lucide-react";

interface Props {
    variant?: "neutral" | "cyan";
    label: string;
    team1: string;
    team2: string;
    score1?: string | number;
    score2?: string | number;
    date: string;
    time?: string;
    location: string;
    isResult?: boolean;
    rotation?: "left" | "right" | "none";
}

const {
    variant = "neutral",
    label,
    team1,
    team2,
    score1,
    score2,
    date,
    time,
    location,
    isResult = false,
    rotation = "none",
} = Astro.props;

const borderColor =
    variant === "cyan"
        ? "border-[var(--color-neon-cyan)] shadow-[0_4px_20px_rgba(34,211,238,0.15)] bg-[#1a1a1a]"
        : "border-white/10 bg-[#1a1a1a] shadow-[0_4px_20px_rgba(0,0,0,0.5)]";

const labelBg =
    variant === "cyan"
        ? "bg-[var(--color-neon-cyan)] text-black"
        : "bg-neutral-800/80 text-white backdrop-blur-sm border border-white/5";

const scoreColor = "text-[var(--color-neon-cyan)]";

const rotationClass =
    rotation === "left"
        ? "-rotate-2 hover:rotate-0"
        : rotation === "right"
          ? "rotate-2 hover:rotate-0"
          : "";

const vsColor =
    variant === "cyan"
        ? "text-neutral-500"
        : "text-[var(--color-neon-cyan)]/50";
---

<div
    class={`relative p-8 rounded-sm border-2 flex flex-col gap-6 w-full max-w-lg transition-transform duration-300 ${borderColor} ${rotationClass}`}
>
    <!-- Label Badge -->
    <div class="absolute -top-4 -left-2 transform -rotate-2">
        <span
            class={`px-4 py-1.5 text-xs font-bold uppercase tracking-widest shadow-lg ${labelBg}`}
            style="clip-path: polygon(5% 0%, 100% 0%, 95% 100%, 0% 100%);"
        >
            {label}
        </span>
    </div>

    <!-- Match ID / Badge Top Right (Mock) -->
    <div
        class="absolute top-4 right-4 text-[10px] text-neutral-500 font-mono tracking-tighter opacity-60"
    >
        LDS-2025
    </div>

    <div class="flex items-center justify-between mt-6">
        <!-- Team 1 -->
        <div class="flex flex-col items-center text-center w-5/12">
            <h3
                class="font-heading text-2xl md:text-3xl font-bold uppercase leading-none tracking-tight text-white"
            >
                {team1}
            </h3>
            {
                isResult && (
                    <span
                        class={`font-heading text-7xl font-bold mt-2 leading-none ${scoreColor}`}
                    >
                        {score1}
                    </span>
                )
            }
        </div>

        <!-- VS -->
        <div
            class={`flex flex-col items-center justify-center w-2/12 font-heading text-4xl italic font-black select-none opacity-40 ${vsColor}`}
        >
            <span>VS</span>
        </div>

        <!-- Team 2 -->
        <div class="flex flex-col items-center text-center w-5/12">
            <h3
                class="font-heading text-2xl md:text-3xl font-bold uppercase leading-none tracking-tight text-white"
            >
                {team2}
            </h3>
            {
                isResult && (
                    <span class="font-heading text-7xl font-bold mt-2 leading-none text-white/90">
                        {score2}
                    </span>
                )
            }
        </div>
    </div>

    <!-- Meta Info -->
    <div
        class="flex flex-wrap gap-x-6 gap-y-2 mt-auto text-xs text-neutral-400 font-mono pt-6 border-t border-white/5 items-center justify-center"
    >
        <div class="flex items-center gap-2">
            <Calendar size={12} className="text-[var(--color-neon-cyan)]" />
            <span>{date} {time && `— ${time}`}</span>
        </div>
        <div class="flex items-center gap-2">
            <MapPin size={12} className="text-[var(--color-neon-cyan)]" />
            <span>{location}</span>
        </div>
    </div>

    {
        isResult && (
            <div class="absolute -bottom-5 left-1/2 -translate-x-1/2">
                <span class="px-6 py-2 bg-[#0f0f0f] border border-[var(--color-neon-cyan)]/30 text-[var(--color-neon-cyan)] font-bold tracking-[0.2em] text-sm uppercase shadow-xl rounded-full block whitespace-nowrap">
                    ¡Victoria!
                </span>
            </div>
        )
    }
</div>
