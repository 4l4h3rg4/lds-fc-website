---
import { MessageSquare, Heart } from "lucide-react";

const { story } = Astro.props as { story: { author: string; body: string; likes: number } };
---

<section
    class="py-24 px-6 relative bg-[url('/bg-texture.png')] bg-cover bg-fixed border-t border-white/5"
>
    <!-- Overlay -->
    <div class="absolute inset-0 bg-black/90"></div>

    <div class="max-w-4xl mx-auto relative z-10 text-center">
        <h2
            class="font-heading text-3xl md:text-5xl text-white uppercase tracking-wider mb-12"
        >
            LA TRIBUNA
        </h2>

        <!-- Featured Story Card -->
        {story && (
        <div class="relative group max-w-2xl mx-auto mb-12">
            <!-- Red Pin -->
            <div
                class="absolute -top-3 left-1/2 -translate-x-1/2 z-20 w-6 h-6 rounded-full bg-[#E63946] border-2 border-[rgba(0,0,0,0.2)] shadow-md"
            >
            </div>

            <!-- Paper -->
            <div
                class="bg-[#f0f0f0] p-8 md:p-12 shadow-xl transform rotate-1 transition-transform duration-300 hover:rotate-0 text-left paper-texture"
            >
                <p
                    class="font-heading text-xl md:text-2xl text-black leading-normal mb-6 uppercase"
                >
                    "{story.body}"
                </p>
                <div
                    class="flex items-center justify-between border-t border-black/10 pt-4"
                >
                    <span
                        class="font-bold text-black uppercase tracking-wider text-sm"
                        >- {story.author}</span
                    >
                    <div
                        class="flex items-center gap-2 text-[#E63946] font-bold font-mono text-sm"
                    >
                        <Heart size={16} fill="currentColor" /> {story.likes || 0}
                    </div>
                </div>
            </div>
        </div>
        )}

        <a
            href="/comunidad"
            class="inline-block px-8 py-3 border border-white/20 text-white font-heading uppercase tracking-widest text-sm hover:bg-white hover:text-black transition-colors"
        >
            Ver m√°s historias
        </a>
    </div>
</section>

<style>
    .paper-texture {
        background-color: #f0f0f0;
        background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.05'/%3E%3C/svg%3E");
    }
</style>
